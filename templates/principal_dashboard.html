<!DOCTYPE html>
<html>
<head>
<title>Principal Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background:#eef1f5; }
.card { margin-bottom:25px; border-radius:12px; }
table tr:hover { background:#f2f2f2; }
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-danger">
  <div class="container-fluid">
    <span class="navbar-brand">ğŸ« Principal Dashboard</span>
    <a href="/logout" class="btn btn-light btn-sm">Logout</a>
  </div>
</nav>

<div class="container mt-4">

{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="alert alert-success">{{ messages[0] }}</div>
{% endif %}
{% endwith %}

<!-- OVERVIEW -->
<div class="card">
<div class="card-header bg-dark text-white">ğŸ“Š School Overview</div>
<div class="card-body row text-center">
<div class="col-md-4">
<h6>Total Students</h6>
<h3>{{ total_students }}</h3>
</div>
<div class="col-md-4">
<h6>Total Teachers</h6>
<h3>{{ total_teachers }}</h3>
</div>
<div class="col-md-4">
<h6>Classes</h6>
<h3>{{ total_classes }}</h3>
</div>
</div>
</div>

<!-- SEARCH STUDENT -->
<div class="card">
<div class="card-header bg-info text-white">ğŸ” View Student by ID</div>
<div class="card-body">
<form method="GET" action="/principal/student">
<div class="input-group">
<input type="text" name="student_id"
class="form-control"
placeholder="Enter Student ID (STU1001)"
required>
<button class="btn btn-info">Search</button>
</div>
</form>
</div>
</div>

<!-- STUDENTS -->
<div class="card">
<div class="card-header bg-dark text-white">ğŸ‘¨â€ğŸ“ Students</div>
<div class="card-body">
<table class="table table-bordered text-center">
<thead class="table-dark">
<tr>
<th>ID</th>
<th>Name</th>
<th>Class</th>
<th>Action</th>
</tr>
</thead>
<tbody>
{% for s in students %}
<tr>
<td>{{ s.student_id }}</td>
<td>{{ s.name }}</td>
<td>{{ s.class }}</td>
<td>
<a href="/delete_student/{{ s.student_id }}"
class="btn btn-danger btn-sm"
onclick="return confirm('Delete this student?')">
Delete
</a>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
</div>

<!-- TEACHERS -->
<div class="card">
<div class="card-header bg-success text-white">ğŸ‘©â€ğŸ« Teachers</div>
<div class="card-body">
<table class="table table-bordered text-center">
<thead class="table-dark">
<tr>
<th>ID</th>
<th>Name</th>
<th>Subject</th>
</tr>
</thead>
<tbody>
{% for t in teachers %}
<tr>
<td>{{ t.teacher_id }}</td>
<td>{{ t.name }}</td>
<td>{{ t.subject }}</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
</div>

<!-- TIMETABLE -->
<div class="card">
<div class="card-header bg-success text-white">ğŸ•’ Timetable Management</div>
<div class="card-body">
<form method="POST" action="/add_timetable">
<div class="row mb-3">
<div class="col-md-3">
<input name="class" class="form-control" placeholder="Class (8-A)" required>
</div>
<div class="col-md-3">
<select name="day" class="form-control" required>
<option value="">Day</option>
<option>Monday</option>
<option>Tuesday</option>
<option>Wednesday</option>
<option>Thursday</option>
<option>Friday</option>
</select>
</div>
<div class="col-md-3">
<input name="time" class="form-control" placeholder="9:00 - 9:45" required>
</div>
<div class="col-md-3">
<input name="subject" class="form-control" placeholder="Subject" required>
</div>
</div>
<button class="btn btn-success w-100">Save Timetable</button>
</form>
</div>
</div>

<!-- HOLIDAYS -->
<div class="card">
<div class="card-header bg-warning">ğŸ– Holiday Management</div>
<div class="card-body">
<form method="POST" action="/add_holiday">
<div class="row mb-3">
<div class="col-md-4">
<input type="date" name="date" class="form-control" required>
</div>
<div class="col-md-8">
<input name="reason" class="form-control" placeholder="Holiday Reason" required>
</div>
</div>
<button class="btn btn-warning w-100">Add Holiday</button>
</form>

<hr>

<table class="table table-bordered text-center">
<thead class="table-dark">
<tr>
<th>Date</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
{% for h in holidays %}
<tr>
<td>{{ h.date }}</td>
<td>{{ h.reason }}</td>
</tr>
{% endfor %}
</tbody>
</table>

</div>
</div>

</div>
</body>
</html>
